#!/bin/bash

clear

echo "$(cat /etc/firstsetup/misc/branding.txt)"
echo "Step 3: Install Brew package manager"
notify-send "Hey! Come back to the setup window; this command needs your input."
bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
test -d $HOME/.linuxbrew && eval "$($HOME/.linuxbrew/bin/brew shellenv)"
test -d /home/linuxbrew/.linuxbrew && eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
echo "eval \"\$($(brew --prefix)/bin/brew shellenv)\"" >> ~/.bashrc

clear

echo "$(cat /etc/firstsetup/misc/branding.txt)"
echo "Step 4: Install rust"
notify-send "Hey! Come back to the setup window; this command needs your input."
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

clear

echo "$(cat /etc/firstsetup/misc/branding.txt)"
echo "Step 5: Configure flatpak repositories (user)"
flatpak remote-add --if-not-exists --user flathub https://dl.flathub.org/repo/flathub.flatpakrepo

clear

echo "$(cat /etc/firstsetup/misc/branding.txt)"
echo "Step 6: Install System Update (topgrade)"
$HOME/.cargo/bin/cargo install topgrade
